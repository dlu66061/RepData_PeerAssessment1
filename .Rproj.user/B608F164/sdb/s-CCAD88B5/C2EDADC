{
    "contents" : "---\ntitle: \"Reproducible Research: Peer Assessment 1\"\ndate: \"September 19, 2015\"\noutput: html_document\nkeep_md: true\n---\n## Loading and preprocessing the data\nAfter forking the project from https://github.com/rdpeng/RepData_PeerAssessment1, I cloned it onto my local machine, and unzipped activity.zip outside R codes, resulting in activity.csv in the same folder. I then created a new R Studio project in this directory.\n\nWe first read in the file into a data frame called \"activity\":\n```{r, echo=TRUE}\nactivity <- read.csv(\"activity.csv\")\n```\n\n## Q1: What is mean total number of steps taken per day?\n\nFor this question, we need to split the data frame by date, and applied sum over the data by date. For statistical calculation, we converted the list to a vector of numerics.\n```{r, echo=TRUE}\nactivity <- read.csv(\"activity.csv\")\nbyDate <- with(activity, split(steps, date))\ntotalEveryday <- lapply(byDate, sum, na.rm=TRUE)\ntotalEverydayVector <-as.numeric(totalEveryday)\n```\n\nThen the mean is \n```{r}\nmean(totalEverydayVector)\n```\n\nand the median is \n```{r}\nmedian(totalEverydayVector)\n```\n\nThe following histogram shows that the individual is quite active, and walked between 10K and 15K steps most of days There are days the person is laid back and walked less than 5K steps, but in some days, (s)he can reach over 20K steps.\n\n```{r, echo=FALSE}\nhist(totalEverydayVector, xlab = \"Total steps per day\", \n     main = \"Histogram of total steps per day\", col = \"red\")\n```\n\n## Q2: What is the average daily activity pattern?\n\nTo find the average daily activity pattern, we have to split the data frame by interval, and apply the mean function. Since the original interval identifiers are of different lengths, we used str_pad fuction to format them to 4 characters long, prepending with 0 when necessary. Then we transformed labels to Date class, and made a time series plot.\n```{r}\nbyInterval <- with(activity, split(steps, interval))\nmeanByInterval <- lapply(byInterval, mean, na.rm=TRUE)\nlibrary(stringr)\nlabels <- str_pad(names(meanByInterval), 4, pad = \"0\")\nlabels <- strptime(labels, format=\"%H%M\")\navgByInterval <- as.numeric(meanByInterval)\nplot(x=labels, y=avgByInterval, type=\"l\", xlab = \"Time in a Day\"\n     , ylab = \"Average steps\", main = \"Average steps per 5 min interval\")\n```\n\nwith the maximum number of \n```{r}\nsprintf(\"%.0f\", avgByInterval[which.max(avgByInterval)])\n``` \nsteps at \n```{r} \nformat(labels[which.max(avgByInterval)], \"%H:%M\")\n``` \n\nQuite early in the morning. It looks like this is an early morning person, and do most walking between 8am and 10am. There are also more walking around lunch and dinner time.\n\n## Q3: Imputting Missing Values\n\nBrowsing over \"activity\" data frame, we can see a lot of missing values for the steps. The number of records missing \"steps\" field is\n```{r}\nsum(is.na(activity$steps))\n```\nabout 13% of the data set. \n\nWhat values should we replace those NAs with? I think it is quite reasonable to use the mean for that 5-minute interval from Q2. We created new data frame \"fullActivity\" from \"activity\", and then replace NAs with the mean for the corresponding 5-minute interval.\n```{r}\nfullActivity <- activity\nfor (i in 1:nrow(fullActivity)) {\n  if (is.na(fullActivity[i, \"steps\"]))\n    fullActivity[i, \"steps\"] <- meanByInterval[[as.character(fullActivity[i, \"interval\"])]]\n}\n```\n\nThen we can repeat what we did in Q1, but using the new \"fullActivity\"\n```{r, echo=TRUE}\nbyDate <- with(fullActivity, split(steps, date))\ntotalEveryday <- lapply(byDate, sum, na.rm=TRUE)\ntotalEverydayVector <-as.numeric(totalEveryday)\n```\nThe new mean is \n```{r}\nmean(totalEverydayVector)\n```\n\nand the new median is \n```{r}\nmedian(totalEverydayVector)\n```\n\nThe new histogram looks like\n\n```{r, echo=FALSE}\nhist(totalEverydayVector, xlab = \"Total steps per day\", \n     main = \"Histogram of total steps per day\", col = \"blue\")\n```\n\nSince we filled in about 13% of missing fields, the increase in the average number of total steps per day should also be about the same. Comparing 10766 vs 9354, it is about 15% increase, not far from the 13%.\n\nSince the average is from 9354 to 10766, most of the increases should be around this area. We can see the number of occurances between 10K to 15K jumped more significantly, also quite noticiable drop between 0K and 5K. This implied that the missing data caused overcalculation on the lower end, which is reasonable. The number of occurances for the other 3 brackets did not change that much.\n\n## Q4: Are there differences in activity patterns between weekdays and weekends?\nTo answer this, we have to separate weekday and weekend activities like following:\n```{r, echo=TRUE}\nfullActivity$dayOfWeek <- as.factor(weekdays(strptime(fullActivity$date, format=\"%Y-%m-%d\")))\nfor (i in 1:nrow(fullActivity)) {\n  if (fullActivity[i, \"dayOfWeek\"] %in% c('Saturday', 'Sunday'))\n    fullActivity[i, \"dayType\"] <- 'weekend'\n  else\n    fullActivity[i, \"dayType\"] <- 'weekday'\n}\nweekday <- subset(fullActivity, dayType == 'weekday')\nweekend <- subset(fullActivity, dayType == 'weekend')\n```\nRepeating what we did in Q2, by replacing \"activity\" with \"weekday\" or \"weekend\", respectively\n```{r}\nbyIntervalWkdy <- with(weekday, split(steps, interval))\nmeanByIntervalWkdy <- lapply(byIntervalWkdy, mean, na.rm=TRUE)\nlabelsWkdy <- str_pad(names(meanByIntervalWkdy), 4, pad = \"0\")\nlabelsWkdy <- strptime(labelsWkdy, format=\"%H%M\")\navgByIntervalWkdy <- as.numeric(meanByIntervalWkdy)\n\nbyIntervalWkd <- with(weekend, split(steps, interval))\nmeanByIntervalWkd <- lapply(byIntervalWkd, mean, na.rm=TRUE)\nlabelsWkd <- str_pad(names(meanByIntervalWkd), 4, pad = \"0\")\nlabelsWkd <- strptime(labelsWkd, format=\"%H%M\")\navgByIntervalWkd <- as.numeric(meanByIntervalWkd)\n\n```\n\nThen we use the R base package to make a panel plot comparing the weekday and weekend activities.\n```{r}\npar(mfrow = c(2, 1))\npar(cex = 0.6)\npar(mar = c(0,0,0,0), oma=c(4, 4, 5, 0.5))\npar(tcl = -0.25)\npar(mgp = c(2, 0.6, 0))\nplot(x=labelsWkdy, y=avgByIntervalWkdy, type = \"l\", axes = FALSE)\nmtext(\"Weekday Activity\", side = 3, cex = 0.7, line = -1.3, adj = 0.01)\naxis(2)\nbox()\nplot(x=labelsWkd, y=avgByIntervalWkd, type = \"l\")\nmtext(\"Weekend Activity\", side = 3, cex = 0.7, line = -1.3, adj = 0.01)\n\nmtext(\"Time\", side = 1, outer = TRUE, cex = 1, line = 2.2)\nmtext(\"Average Steps\", side = 2, outer = TRUE, cex = 1, line = 2.2)\nmtext(\"Comparison of Weekday vs Weekend Activity\", side = 3, outer = TRUE, cex = 1.2, line = 2.2)\n```\n\nWe can see obvious differences. In weekdays, the person usually gets up earlier, and does most exercise in the morning, and do other works for the rest of the day. In weekends, this person gets up later, and then spread his/her activities more evenly throughout a day.",
    "created" : 1442711173124.000,
    "dirty" : true,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "166534078",
    "id" : "C2EDADC",
    "lastKnownWriteTime" : 1442712603,
    "path" : "C:/Projects/R/Reproducible Research/RepData_PeerAssessment1/PA1_template.Rmd",
    "project_path" : "PA1_template.Rmd",
    "properties" : {
    },
    "relative_order" : 11,
    "source_on_save" : false,
    "type" : "r_markdown"
}